<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>電路維修 - 第一步：佈線測試</title>
    <style>
        body { background: #0a0a0a; color: #00ffcc; text-align: center; font-family: monospace; }
        canvas { background: #000; border: 2px solid #333; margin-top: 30px; }
        .hint { margin: 10px; color: #666; }
    </style>
</head>
<body>

    <h2>電路圖佈線測試</h2>
    <div class="hint">這是模仿 (未命名-2.jpg) 的初始虛線路徑</div>
    <canvas id="gameCanvas" width="800" height="800"></canvas>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const center = 400; // 中心點

        function drawCircuit() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // 1. 繪製電池 (頂部黑色方塊)
            ctx.fillStyle = "#1a1a1a";
            ctx.strokeStyle = "#00ffcc";
            ctx.lineWidth = 2;
            ctx.fillRect(center - 50, 20, 100, 40);
            ctx.strokeRect(center - 50, 20, 100, 40);

            // 2. 設置電線樣式 (未連通前的虛線)
            ctx.strokeStyle = "#333333"; // 深灰色
            ctx.setLineDash([5, 10]);    // 虛線樣式
            ctx.lineWidth = 2;

            // 3. 繪製嵌套的回字型線路
            const layers = [80, 160, 240, 320]; // 四層嵌套半徑
            
            layers.forEach(r => {
                ctx.beginPath();
                // 畫正方形方框
                ctx.strokeRect(center - r, center - r, r * 2, r * 2);
            });

            // 4. 繪製連接各層的垂直與水平十字線
            ctx.beginPath();
            // 垂直中心線 (由電池引出)
            ctx.moveTo(center, 60);
            ctx.lineTo(center, center + 320);
            // 水平中心線
            ctx.moveTo(center - 320, center);
            ctx.lineTo(center + 320, center);
            ctx.stroke();

            // 5. 繪製 4 個電源目標位置 (圓圈)
            ctx.setLineDash([]); // 圓圈用實線標示位置
            const targets = [
                {x: center, y: center},             // 中心
                {x: center + 240, y: center - 160}, // 右上
                {x: center - 240, y: center + 160}, // 左下
                {x: center + 320, y: center + 80}   // 右側
            ];

            targets.forEach(t => {
                ctx.beginPath();
                ctx.arc(t.x, t.y, 15, 0, Math.PI * 2);
                ctx.stroke();
            });
        }

        drawCircuit();
    </script>
</body>
</html>
