<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>電路維修 - 終極地圖還原</title>
    <style>
        body { background: #050505; color: #eee; text-align: center; font-family: sans-serif; }
        canvas { background: #000; border: 2px solid #333; margin-top: 10px; }
        .hint { color: #555; font-size: 12px; margin: 5px; }
    </style>
</head>
<body>
    <canvas id="gameCanvas" width="800" height="850"></canvas>
    <div class="hint">參照 未命名-2.jpg 與 未命名-1.jpg 繪製</div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        function drawMap() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // 1. 左上角電池 (根據 未命名-2.jpg)
            ctx.fillStyle = "#1a1a1a";
            ctx.fillRect(50, 20, 150, 70);
            ctx.strokeStyle = "#00ffcc";
            ctx.lineWidth = 2;
            ctx.strokeRect(50, 20, 150, 70);

            // 2. 佈線樣式：通電前全為灰色虛線
            ctx.strokeStyle = "#444";
            ctx.setLineDash([5, 8]);
            ctx.lineWidth = 2;

            // --- 繪製不規則嵌套電線 ---
            ctx.beginPath();
            // 電池引線：右轉向下
            ctx.moveTo(200, 55); ctx.lineTo(450, 55); ctx.lineTo(450, 300);

            // 最外層大框 (不對稱)
            ctx.strokeRect(100, 100, 650, 650);

            // 第二層中框
            ctx.strokeRect(200, 200, 450, 450);

            // 第三層內框 (偏左下)
            ctx.strokeRect(300, 300, 250, 250);

            // 垂直十字軸線 (非中心)
            ctx.moveTo(450, 55); ctx.lineTo(450, 750);
            // 水平十字軸線
            ctx.moveTo(100, 425); ctx.lineTo(750, 425);

            // 底部長連接線
            ctx.moveTo(100, 750); ctx.lineTo(750, 750);
            ctx.stroke();

            // 3. 繪製 6 個目標電源 (綠色圓圈)
            ctx.setLineDash([]);
            const targets = [
                {x: 450, y: 425}, // 正中心
                {x: 750, y: 100}, // 右上
                {x: 700, y: 250}, // 中右
                {x: 350, y: 350}, // 中偏左上
                {x: 600, y: 650}, // 下右
                {x: 100, y: 750}  // 左下
            ];
            targets.forEach(t => {
                ctx.strokeStyle = "#00ffcc";
                ctx.beginPath(); ctx.arc(t.x, t.y, 22, 0, Math.PI*2); ctx.stroke();
            });

            // 4. 放置 16 個紅色方格 (依據 未命名-1.jpg)
            const nodes = [
                {x: 450, y: 100}, {x: 450, y: 200}, {x: 450, y: 300}, {x: 450, y: 550}, {x: 450, y: 650}, {x: 450, y: 750}, // 垂直軸
                {x: 100, y: 425}, {x: 200, y: 425}, {x: 300, y: 425}, {x: 550, y: 425}, {x: 650, y: 425}, {x: 750, y: 425}, // 水平軸
                {x: 350, y: 425}, {x: 450, y: 500}, {x: 200, y: 200}, {x: 650, y: 650} // 轉折點
            ];
            nodes.forEach(n => {
                ctx.strokeStyle = "red";
                ctx.strokeRect(n.x - 25, n.y - 25, 50, 50);
                // 畫內部符號 (這裡先簡單模擬 T 型與黃色雙向)
                ctx.strokeStyle = "#0099ff";
                ctx.beginPath(); ctx.moveTo(n.x - 15, n.y); ctx.lineTo(n.x + 15, n.y); ctx.stroke();
            });
        }

        drawMap();
    </script>
</body>
</html
